!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(t,e,i,s){this.left=t,this.top=e,this.width=i,this.height=s}get right(){return this.left+this.width}set right(t){this.left=t-this.width}get bottom(){return this.top+this.height}set bottom(t){this.top=t-this.height}get centerX(){return this.left+this.width/2}set centerX(t){this.left=t-this.width/2}get centerY(){return this.top+this.height/2}set centerY(t){this.top=t-this.height/2}offset(t,e){this.left+=t,this.top+=e}contains(t,e){return this.containsX(t)&&this.containsY(e)}containsX(t){return this.left<=t&&t<=this.right}containsY(t){return this.top<=t&&t<=this.bottom}containsRect(t){return this.left<=t.left&&t.right<=this.right&&this.bottom<=t.bottom&&t.top<=this.top}overlapsRect(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}}class n{constructor(t,e,i,n,o){this.x=t,this.y=e,this.radius=i,this.dx=n,this.dy=o,this.target=new s(this.x+this.dx-this.radius,this.y+this.dy-this.radius,2*this.radius,2*this.radius)}onGameTick(t){this.show(t),this.move()}show({ctx:t}){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle="#0095DD",t.fill(),t.closePath()}move(){this.x+=this.dx,this.y+=this.dy,this.target.offset(this.dx,this.dy)}collidesWithWall({bounds:t}){return!t.containsX(this.target.left)||!t.containsX(this.target.right)}collidesWithCeiling({bounds:t}){return!t.containsY(this.target.top)}collidesWithFloor({bounds:t}){return!t.containsY(this.target.bottom)}collidesWithPaddle({bounds:t}){return t.overlapsRect(this.target)}collidesWithBrick(t){return t.isIntact&&t.bounds.overlapsRect(this.target)}bounceAgainstWall(t){this.dx=-this.dx}bounceAgainstCeiling(t){this.dy=-this.dy}bounceAgainstPaddle(t){this.dy=-this.dy}bounceAgainstBrick(t){this.dy=-this.dy}}class o{handleCollision(t){return this.handleCollisionWithBricks(t)||this.handleCollisionWithPaddle(t)||this.handleCollisionWithWall(t)||this.handleCollisionWithCeiling(t)||this.handleCollisionWithFloor(t)}handleCollisionWithBricks(t){return t.bricks.some(e=>this.handleCollisionWithBrick(t,e))}handleCollisionWithBrick(t,e){let{ball:i,bricks:s,score:n}=t;if(i.collidesWithBrick(e))return i.bounceAgainstBrick(e),e.destroy(),++n.value==s.length&&t.complete(),!0}handleCollisionWithPaddle({ball:t,paddle:e}){if(t.collidesWithPaddle(e))return t.bounceAgainstPaddle(e),!0}handleCollisionWithWall({ball:t,room:e}){if(t.collidesWithWall(e))return t.bounceAgainstWall(e),!0}handleCollisionWithCeiling({ball:t,room:e}){if(t.collidesWithCeiling(e))return t.bounceAgainstCeiling(e),!0}handleCollisionWithFloor(t){let{ball:e,room:i}=t;if(e.collidesWithFloor(i))return t.stop(),!0}}var r;!function(t){t[t.INTACT=0]="INTACT",t[t.DESTROYED=1]="DESTROYED"}(r||(r={}));class h{constructor(t){this.bounds=t,this.status=r.INTACT}get isIntact(){return this.status==r.INTACT}destroy(){this.status=r.DESTROYED}onGameTick(t){this.status==r.INTACT&&this.show(t)}show({ctx:t}){let{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),t.fillStyle="#0095DD",t.fill(),t.closePath()}}class l{newBricks(t,e,i){return Array.from(this.newBrickGenerator(t,e,i))}*newBrickGenerator(t,e,i){for(let s=0;s<t;s++)for(let t=0;t<e;t++)yield this.newBrick(s,t,i)}newBrick(t,e,{padding:i,width:n,height:o,offsetLeft:r,offsetTop:l}){return new h(new s(t*(n+i)+r,e*(o+i)+l,n,o))}}class a{constructor(t,e){this.x=t,this.y=e}}class c{constructor(t){this.canvasEl=t,this.dragging=!1,this.dragPosition=null,this.onPointerDown=t=>{this.dragging=t.target==this.canvasEl},this.onPointerMove=t=>{this.dragging&&(t.preventDefault(),this.dragPosition=this.measureDragPosition(t))},this.onPointerUp=t=>{this.dragging=!1,this.dragPosition=null}}getDragPosition(){return this.dragPosition}startListening(){this.canvasEl.addEventListener("pointerdown",this.onPointerDown),this.canvasEl.addEventListener("pointermove",this.onPointerMove),this.canvasEl.addEventListener("pointerup",this.onPointerUp),this.canvasEl.addEventListener("pointercancel",this.onPointerUp)}stopListening(){this.canvasEl.removeEventListener("pointerdown",this.onPointerDown),this.canvasEl.removeEventListener("pointermove",this.onPointerMove),this.canvasEl.removeEventListener("pointerup",this.onPointerUp),this.canvasEl.removeEventListener("pointercancel",this.onPointerUp)}measureDragPosition(t){return new a(t.clientX-this.canvasEl.offsetLeft,t.clientY-this.canvasEl.offsetTop)}}class d{constructor(t,e,i,s,n,o,r,h,l){this.ctx=t,this.dragDetector=e,this.keyListener=i,this.ballCollisionHandler=s,this.room=n,this.score=o,this.bricks=r,this.ball=h,this.paddle=l,this.tick=0,this.running=!1,this.onFrameRequest=()=>{this.tick++,this.ballCollisionHandler.handleCollision(this),this.room.onGameTick(this),this.score.onGameTick(this),this.bricks.forEach(t=>t.onGameTick(this)),this.ball.onGameTick(this),this.paddle.onGameTick(this),this.requestNextFrame()}}start(){this.running=!0,this.dragDetector.startListening(),this.keyListener.startListening(),this.requestNextFrame()}stop(){this.running=!1,this.dragDetector.stopListening(),this.keyListener.stopListening(),alert("GAME OVER"),document.location.reload()}complete(){this.running=!1,this.dragDetector.stopListening(),this.keyListener.stopListening(),alert("YOU WIN, CONGRATULATIONS!"),document.location.reload()}requestNextFrame(){this.running&&requestAnimationFrame(this.onFrameRequest)}}class u{constructor(){this.leftKeyPressed=!1,this.rightKeyPressed=!1,this.onKeyDown=t=>{switch(t.key){case"Left":case"ArrowLeft":this.leftKeyPressed=!0;break;case"Right":case"ArrowRight":this.rightKeyPressed=!0}},this.onKeyUp=t=>{switch(t.key){case"Left":case"ArrowLeft":this.leftKeyPressed=!1;break;case"Right":case"ArrowRight":this.rightKeyPressed=!1}}}startListening(){document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1)}stopListening(){document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("keyup",this.onKeyUp,!1)}}class g{constructor(t,e){this.bounds=t,this.speed=e}onGameTick(t){this.show(t),this.handleLeftKeyPress(t),this.handleRightKeyPress(t),this.handleDragging(t)}show({ctx:t}){let{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),t.fillStyle="#0095DD",t.fill(),t.closePath()}handleLeftKeyPress({room:t,keyListener:e}){e.leftKeyPressed&&(this.bounds.left=Math.max(t.bounds.left,this.bounds.left-this.speed))}handleRightKeyPress({room:t,keyListener:e}){e.rightKeyPressed&&(this.bounds.right=Math.min(t.bounds.right,this.bounds.right+this.speed))}handleDragging({room:t,dragDetector:e}){let i=e.getDragPosition();i&&t.bounds.containsX(i.x)&&(this.bounds.centerX=i.x)}}class f{constructor(t){this.bounds=t}get width(){return this.bounds.width}get height(){return this.bounds.height}onGameTick({ctx:t}){let{left:e,top:i,width:s,height:n}=this.bounds;t.clearRect(e,i,s,n)}}class p{constructor(t,e){this.x=t,this.y=e,this.value=0}onGameTick({ctx:t}){t.font="16px Arial",t.fillStyle="#0095DD",t.fillText("Score: "+this.value,this.x,this.y)}}let w=document.querySelector("#gameboard");new class{constructor(t){this.canvasEl=t}newGame(){let t=this.newRoom(),e=this.newBricks(),i=this.newBall(t),s=this.newPaddle(t),n=this.canvasEl.getContext("2d"),r=new c(this.canvasEl);return new d(n,r,new u,new o,t,this.newScore(),e,i,s)}newRoom(){let{width:t,height:e}=this.canvasEl;return new f(new s(0,0,t,e))}newScore(){return new p(8,20)}newBall(t){return new n(t.width/2,t.height-30,10,2,-2)}newPaddle(t){let e=(t.width-75)/2,i=t.height-10,n=new s(e,i,75,10);return new g(n,7)}newBricks(){return(new l).newBricks(3,5,{width:75,height:20,padding:10,offsetTop:30,offsetLeft:30})}}(w).newGame().start()}]);